local a=Class(function(self,b)self.persistdata={}self.dirty=true;self.id=b end)local function c(d)return d:match'^%s*(.*%S)%s*$'or''end;function a:GetSaveName()return BRANCH=="release"and self.id or self.id..BRANCH end;function a:SetValue(e,f)self.persistdata[e]=f;self.dirty=true end;function a:GetValue(e)return self.persistdata[e]end;function a:Save(g)if self.dirty then local h=json.encode(self.persistdata)local i,j=SavePersistentString(self:GetSaveName(),h,ENCODE_SAVES,g)elseif g then g(true)end end;function a:Load(g)TheSim:GetPersistentString(self:GetSaveName(),function(k,h)if k then self:Set(h,g)end end,false)end;function a:Set(h,g)if h and c(h)~=""then self.persistdata=json.decode(h)self.dirty=false end;if g then g(true)end end;return a